{% extends 'listings/base.html' %}
{% load static %}

{% block title %}My Listings â€” Homeverse{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/my_listings.css' %}">
{% endblock %}

{% block content %}
<div class="container my-5">
  <h2 class="text-center mb-4">ğŸ  My Property Listings</h2>

  {% if properties %}
    <div class="row">
      {% for property in properties %}
        <div class="col-md-4 mb-4">
          <div class="card shadow-sm border-0 rounded-3 h-100">

            {% if property.image %}
              <img src="{{ property.image.url }}" 
                   class="card-img-top" 
                   alt="{{ property.title }}">
            {% else %}
              <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?ixlib=rb-4.1.0&fm=jpg&q=60&w=600"
                   class="card-img-top"
                   alt="placeholder">
            {% endif %}

            <div class="card-body">
              <h5 class="card-title">{{ property.title }}</h5>
              <p class="text-muted mb-1">
                {{ property.location }} â€¢ {{ property.get_property_type_display }}
              </p>
              <p class="fw-bold text-success mb-2">â‚¹{{ property.price|floatformat:0 }}</p>

              <div class="d-flex justify-content-between mb-3">
                <small>ğŸ›ï¸ {{ property.bedrooms }} Beds</small>
                <small>ğŸ› {{ property.bathrooms }} Baths</small>
                <small>ğŸ“ {{ property.area }} sqft</small>
              </div>

              <div class="d-flex justify-content-between">
                <a href="{% url 'property_detail' property.pk %}" class="btn btn-sm btn-outline-primary">View</a>
                <a href="{% url 'edit_property' property.pk %}" class="btn btn-sm btn-outline-warning">Edit</a>
              </div>
            </div>

          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center mt-5">
      <h5 class="text-muted">You haven't listed any properties yet.</h5>
      <a href="{% url 'add_property' %}" class="btn btn-primary mt-3">Add Your First Property</a>
    </div>
  {% endif %}
</div>
{% endblock %}
